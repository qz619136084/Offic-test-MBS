$(function(){function e(){return new Promise((e,t)=>{var n=setInterval(()=>{"none"==$("#loading").css("display")&&(e(),clearInterval(n))},100)})}function t(){var e=n("Rooms");if(e>1){r();var t=document.getElementById("multiRoomBanner_outlet"),i={attributes:!0,childList:!0,subtree:!0},l=function(e,t){for(let t of e)if("childList"===t.type){var n=t.addedNodes,i=t.removedNodes;($.inArray($(".banner_card_outlet")[0],n)>-1||$.inArray($(".banner_card_outlet")[0],i)>-1)&&($("body").addClass("flicker370"),setTimeout(()=>{o(),r(),a(),_()},300))}},c=new MutationObserver(l);c.observe(t,i)}}function n(e){var t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var o=n[i].split("=")[0],r=n[i].split("=")[1];if(e==o)return r}}function o(){$("body").addClass("flicker370"),e().then(()=>{$("li[roomview='"+h+"']").hide(),$(".room_card .room_ImageCenterPanel .txt-black-five").each(function(){$(this).find("span:contains('"+h+"')").hide()}),$("body").removeClass("flicker370")})}function r(){$("body").addClass("flicker370"),e().then(()=>{$(".banner_card_title b:contains('"+h+"')").each(function(){var e=$(this).text().replace(" - "+h,"");$(this).text(e)}),$("body").removeClass("flicker370")})}function a(){$(".room_filters_dropdown:not(.dy-bath-filter) a+ul li").unbind("click.hideLower"),$(".room_filters_dropdown.dy-bath-filter a+ul li input").unbind("click.hideLower"),$(".currency_dropdown a+ul li").unbind("click.hideLower"),$("#sort_by").unbind("click.hideLower"),DYO.waitForElementAsync(".room_filters_dropdown:not(.dy-bath-filter) a+ul li").then(()=>{$(".room_filters_dropdown:not(.dy-bath-filter) a+ul li").bind("click.hideLower",()=>{o(),_()})}),DYO.waitForElementAsync(".room_filters_dropdown.dy-bath-filter a+ul li input").then(()=>{$(".room_filters_dropdown.dy-bath-filter a+ul li input").bind("click.hideLower",()=>{o(),_()})}),DYO.waitForElementAsync(".currency_dropdown a+ul li").then(()=>{$(".currency_dropdown a+ul li").bind("click.hideLower",()=>{o(),_()})}),DYO.waitForElementAsync("#sort_by").then(()=>{$("#sort_by").bind("click.hideLower",()=>{o(),_()})})}function l(){s();var e=document.getElementById("upgrade_dialog"),t={attributes:!0,childList:!0,subtree:!0},n=function(t,n){for(let n of t)"attributes"==n.type&&"style"==n.attributeName&&n.target==e&&("block"==$("#upgrade_dialog").css("display")?$("#upgrade_dialog").hasClass("370showed")||($(".currentRoomName:contains('"+h+"')").text($(".currentRoomName:contains('"+h+"')").text().replace(" - "+h,"")),$(".roomName:contains('"+h+"')").text($(".roomName:contains('"+h+"')").text().replace(" - "+h,"")),$("#upgrade").hasClass("370binded")||$("#upgrade").addClass("370binded").click(()=>{d()}),$("#upgrade_dialog").addClass("370showed")):($("#upgrade_dialog").removeClass("370showed"),s(),$(".undo_upgrade").click(()=>{s()})))},o=new MutationObserver(n);o.observe(e,t)}function c(){return new Promise((e,t)=>{var n=setInterval(()=>{"none"!=$(".upgraded").css("display")&&(e(),clearInterval(n))},100)})}function d(){e().then(()=>c()).then(()=>{$(".undo_title b:contains('"+h+"')").text($(".undo_title b:contains('"+h+"')").text().replace(" - "+h,""))})}function s(){DYO.waitForElementAsync(".roomInfoBlock .panel_txt:not(.roomBlockTitle)").then(()=>{$(".roomInfoBlock .panel_txt:not(.roomBlockTitle):contains('"+h+"')").each(function(){var e=$(this).text().replace(" - "+h,"");$(this).text(e)})})}function _(){e().then(()=>{$(".view_room_details_link").unbind("click.hideLower"),$(".room_ImagePanel div").unbind("click.hideLower"),$(".view_room_details_link").bind("click.hideLower",()=>{console.log("link clicking"),m()}),$(".room_ImagePanel").each(function(){$(this).children("div:eq(0)").bind("click.hideLower",()=>{console.log("image clicking"),m()})})})}function m(){e().then(()=>{$("#view_room_details .modal_title:contains('"+h+"')").text($("#view_room_details .modal_title:contains('"+h+"')").text().replace(""+h,"").trim())})}var u=window.location.href,h=null;if(h=u.indexOf("zh.")>-1?"低层":u.indexOf("hk.")>-1?"低層":u.indexOf("jp.")>-1?"低層階":u.indexOf("ko.")>-1?"저층":(u.indexOf("id."),"Lower Floor"),u.indexOf("/booking/rooms.html")>-1)var f=setInterval(()=>{var e=$(".inner_circle_step.shapeborder_selected_in");if(2==e.length){var n=setInterval(()=>{if(null!=f_getSessionStorage()&&"none"==$("#loading").css("display")){o(),a(),t(),_();var e=setInterval(()=>{$("#booking_information_edit").length&&($("#booking_information_edit").click(()=>{var e=f_getSessionStorage().checkindate,n=f_getSessionStorage().los,i=f_getSessionStorage().rooms,r=setInterval(()=>{$("#s_btn_view_rooms").length&&($("#s_btn_view_rooms").click(()=>{var r=setInterval(()=>{if(null!=f_getSessionStorage()&&"none"==$("#loading").css("display")){var l=$(".calendar_date_select").eq(0).attr("data-daydata"),c=$(".calendar_date_select_range").length+1,d=$("#rate_container_box .rate_item").length;e==l&&n==c&&i==d||(o(),a(),t(),_()),clearInterval(r)}},100)}),clearInterval(r))},100)}),clearInterval(e))},100);clearInterval(n)}},100);clearInterval(f)}},100);else u.indexOf("/booking/multirooms.html")>-1?DYO.waitForElementAsync(".mulroom_card_right .vb+strong").then(()=>{$(".mulroom_card_right .vb+strong:contains('"+h+"')").each(function(){var e=$(this).text().replace("-"+h,"");$(this).text(e)})}):u.indexOf("/booking/payment.html")>-1?(DYO.waitForElementAsync("#room_info .edit_txt").then(()=>{$("#room_info .edit_txt").click(()=>{DYO.waitForElementAsync("#s_btn_view_rooms").then(()=>{$("#s_btn_view_rooms").click(()=>{e().then(()=>{s()})})})})}),l()):u.indexOf("/booking/confirmation.html")>-1&&DYO.waitForElementAsync(".data-card .txt-lg-lr").then(()=>{$(".data-card .txt-lg-lr:contains('"+h+"')").each(function(){var e=$(this).text().replace(" - "+h,"");$(this).text(e)})})});